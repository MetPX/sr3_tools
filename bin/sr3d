#!/bin/bash
action="$1"

# Special cases for certain actions BEFORE running on nodes
if [[ "$action" == "add" ]] || [[ "$action" == "convert" ]] || [[ "$action" == "foreground" ]] || \
    [[ "$action" == "convert" ]] || [[ "$action" == "run" ]] ; then
    echo "Action ${action} is not supported with sr3d."
    echo "https://github.com/MetPX/sr3_tools/issues/2"i
    exit 1
fi

sr3r "sr3 $*"

# Special cases for certain actions AFTER running on nodes
if [[ "$action" == "remove" ]] ; then
    # Removing more than one config at a time requires --dangerWillRobinson
    if [[ "$*" != *"--dangerWillRobinson"* ]] && [[ $# -gt 2 ]]; then
        echo "[ERROR] --dangerWillRobinson is required to remove more than one config."
        exit 1
    fi
    sr3_action_remove "$@"
fi
